{% extends 'base/BASE.html' %}

{% block js_block %}
{% load staticfiles %}

<style>
#loading {
   width: 100%;
   height: 100%;
   top: 0px;
   left: 0px;
   position: fixed;
   display: block;
   opacity: 2;
   z-index: 99;
   text-align: center;
}

#loading-image {
    width: 90%;
    height: 110%;
    margin-left: auto;
    margin-right: auto;
}
    #form-container, #col-container {
    background-color: white;
    opacity: 1;
    border:0.5px solid white;
    box-sizing: border-box;
    padding: 50px;
    padding-top: 28px;
    padding-bottom: 220px;
    padding-right: 0px;
    padding-left: 0px;

    border-radius: 3px;
    background: #fff;
    border: 1px solid black;
    box-shadow: 0 2px 4px 0 black; */
}

    #form-container{
    background-color: white;
    opacity: 1;
    border:0.5px solid white;
    box-sizing: border-box;
    padding: 50px;
    padding-top: 28px;
    padding-bottom: 0px;
    padding-right: 40px;
    padding-left: 40px;

    border-radius: 3px;
    background: #fff;
    border: 1px solid black;
    box-shadow: 0 2px 4px 0 black;
}

</style>

<script src="{% static 'js/helper_funcs.js' %}"></script>
<script src="{% static 'js/insert_full_details_personal.js' %}"></script>
<script src="{% static 'js/insert_contact_details.js' %}"></script>
<script src="{% static 'js/insert_job_details.js' %}"></script>
<script src="{% static 'js/reportingTo.js' %}"></script>
<script type="text/javascript">
$.backstretch("{% static 'img/Manhattan-Bridge-13.jpg' %}", {speed: 550});
// Assign template context variables to JS variables
// Load Personal details context variables

var fname = '{{ fname }}'; var mname = '{{ mname }}'; var lname = '{{ lname }}';
var dob = '{{ dob }}'; var marStatus = '{{ marital_status }}';
var licenceNum = '{{ lic_number }}'; var divingExpiry = '{{ lic_expiry|date }}';
var gender = '{{ gender }}';

// Load Contacts details context variables from backend

var addr1 = '{{ 0addrs_line1 }}'; var addr2 = '{{ 0addrs_line2 }}'; var city = '{{ 0addrs_city }}';
var state = '{{ 0addrs_state }}'; var country = '{{ 0addrs_country }}'; var zip = '{{ 0addrs_zip }}';
var homePhone = '{{ 0home_phone }}'; var mobile = '{{ 0mobile }}'; var primEmail = '{{ 0pri_email }}';

// Load Job details context variables from backend

var jobDepartment = '{{ job_dept }}'; var jobDesig = '{{ job_desig }}'; var jobType = '{{ job_type }}';
var joinDate = '{{ join_date|date }}'; var jobLoc = '{{ job_location }}';

// Reporting To module parameters....

var employeeNameList = []; var employeeIdList = [];

{% for obj in employees %}

employeeIdList.push({{ obj.empl_id }});
employeeNameList.push('{{ obj.empl_fname }}' + ' ' + '{{ obj.empl_lname }}');

{% endfor %}
console.log(employeeIdList);
console.log(employeeNameList);

// Page on load ffuction i.e. document.ready

$(function(){
    $('#loading').hide(); // hide page loading overlay

    // Now call JS functions that'll take care of enable-disable controls

	load_personal_details(); post_personal_info();

	load_countries(); load_contacts_details(); post_contact_info();

    fill_departments_designations(); post_job_info();

    postReporting_details();

	$('.datepicker').datepicker();
	$('.selectpicker').selectpicker();
	$('#contact-detail, #job-detail, #reporting-detail').hide();
	$('#supervisor-selects').hide();
	//$('#job-detail').hide();
	$("#sidebar-li ul li a").click(function(e){
		theDiv = $(this).attr("href");
		// alert(theDiv);
		if ($('#personal-edit').is(":visible") || $('#personal-edit-save').is(":visible")){
			existtingDiv = '#personal-detail';
		}
		if ($('#contact-edit').is(":visible") || $('#contact-edit-save').is(":visible")){
			existtingDiv = '#contact-detail';
		}
		if ($('#job-edit').is(":visible") || $('#job-edit-save').is(":visible")){
			existtingDiv = '#job-detail';
		}
		if ($('#add-supervisor').is(":visible")){
			existtingDiv = '#reporting-detail';
		}
		if ($('#save-supervisor').is(":visible")){
			existtingDiv = '#reporting-detail';
		}
		if (existtingDiv == theDiv) {
			return false;
		}

		query = existtingDiv + "," + theDiv;
		$(query).slideToggle();
		e.preventDefault();
		/*
		if (theDiv == '#personal-detail') {
			$('#contact-detail, #personal-detail').fadeToggle(500);
		}
		else {
			$('#personal-detail, #contact-detail').fadeToggle(500);
		}
		*/
		//$('#form-container:first-child').remove();
    	//$('#form-container').append($(theDiv));
    	//$(theDiv).appendTo('#form-container');
    	//$(theDiv).slideToggle();

    	//$(theDiv).show(500);

    	//$('#contact-detail').fadeIn();
    	//$('#form-container').hide().html($(theDiv).html()).show(500);
	});

$('#add-supervisor').on('click', function(){
	$('#add-delete-super-buttons').css('visibility', 'hidden');
	$('#supervisor-selects').show();
	$('#supervisor-selects').css('visibility', 'visible');
});

$('#cancel-supervisor').on('click', function(){
	$('#supervisor-selects').css('visibility', 'hidden');
	$('#add-delete-super-buttons').show();
	$('#add-delete-super-buttons').css('visibility', 'visible');

});

// var data = ['Mahadev','Steve Jobs','Linus Torvald','Mark Zucherburg','Richard Stallmen'];
$('#supervisor-name').typeahead({
        source: employeeNameList,
});

});

</script>

<div class="container-fluid" style="padding-left: 52px;padding-top:20px">
		<div id="col-container" class="col-md-2">
			<div class="row">
                <img src="" class="col-md-10 col-md-offset-1 img-rounded" style="height: 190;" />
			</div>
            <div style="margin-top:5%;">
				<button type="button" class="btn btn-primary col-md-10 col-md-offset-1">Choose Pic </button>
			</div>

            </br>
			<div id="sidebar-li" class="col-md-12">
                </br>
				<ul class="nav">
					<li><a href="#personal-detail"><b><center>Personal Details</center></b></a></li>
					<li><a href="#contact-detail"><b><center>Contact Details</center></b></a></li>
					<li><a href="#job-detail"><b><center>Job Details</center></b></a></li>
					<li><a href="#"><b><center>Salary Details</center></b></a></li>
					<li><a href="#reporting-detail"><b><center>Reporting Details</center></b></a></li>
					<li><a href="#"><b><center>Qualifications</center></b></a></li>
				</ul>
			</div>
		</div>
	<div id="form-container" class="col-md-8 col-md-offset-1">
		<div id="personal-detail">
			<center><h5><span class="label label-default">Personal Details</span></h5></center>
			<form role="form" id="persdetail" action="" class="col col-md-12" method="post">
				<div class="row">
					<h5><span class="label label-primary" style="padding-left:5px;"> Personal Details </span></h5>
					</br>
					<div class="col col-md-4">
						<div class="form-group">
							<input type="text" id="firstname" class="form-control">
						</div>
					</div>
					<div class="col col-md-4">
						<div class="form-group">
							<input type="text" id="middlename" class="form-control">
						</div>
					</div>
					<div class="col col-md-4">
						<div class="form-group">
							<input type="text" id="lastname" class="form-control">
						</div>
					</div>
				</div>
            <!--
				<hr style="border-width: 6.5px" />
			</br>
				<div class="row">
					<h5><span class="label label-primary"> Identity Details </span></h5>
				</br>
					<div class="col-md-4 col-md-offset-1">
						<div class="form-group">
							<input type="text" id="empID" class="form-control" placeholder="Any Other ID">
						</div>
					</div>
				</div>
			-->

				<hr style="border-width: 6.5px" />
			</br>
				<div class="row">
					<h5><span class="label label-primary"> Driving Licence Number, Expiry </span></h5>
				</br>
					<div class="col col-md-4">
						<div class="form-group">
							<input type="text" id="licence-num" class="form-control">
						</div>
					</div>
					<div class="col-md-4 col-md-offset-1">
						<div class="form-group">
							<div class="input-group date" data-date-format="mm/dd/yyyy">
								<input type="text" class="form-control datepicker" name="licen-expiry" readonly="readonly" placeholder="Licence Expiry" id="drv-exp-picker" />
                    				<span class="input-group-addon">
                        				<span class="glyphicon glyphicon-calendar"></span>
                    				</span>
							</div>
						</div>
					</div>
				</div>

				<hr style="border-width: 6.5px" />
			</br>
				<div class="row">
					<h5><span class="label label-primary">Marital status &amp; Gender</span></h5>
				</br>
						<div class="radio-inline">
  							<label><input type="radio" name="optradio" id="marradio-female" value="Female">Female</label>
						</div>
						<div class="radio-inline">
  							<label><input type="radio" name="optradio" id="marradio-male" value="Male">Male</label>
						</div>
						<div class="col col-md-4">
							<div class="form-group">
								<select class="selectpicker" name="marital-status" id="marital-status">
                                    <option value="None">Not Selected Yet</option>
									<option value="Single">Single</option>
									<option value="Married">Married</option>
									<option value="Other">Other</option>
								</select>
							</div>
						</div>
				</div>
			</br>
				<div class="col-md-7 col-md-offset-3">
					<div class="row">
                        <div id="loading">
                            <img id="loading-image" src="{% static 'img/jar-loading.gif' %}" />
                        </div>
					<div class="form-group">
						<button type="button" class="btn btn-danger" id="personal-edit"><strong> Edit Details </strong></button>
					</div>
					<div class="form-group">
						<button type="button" class="btn btn-success" id="personal-edit-save"><strong> Save Details </strong></button>
					</div>
					<div class="form-group">
						<button type="button" class="btn btn-default" id="personal-edit-cancel"><strong> Cancel </strong></button>
					</div>
					</div>
				</div>


			</form>
		</div>
        <!--                                     CONTACTS DETAILS                       -->
<div id="contact-detail">
	<center><h4><span class="label label-primary">Contact Details</span></h4></center>
	<form role="form" action="" method="post" class="col col-md-12">
				<div class="row">
					<h5><span class="label label-primary"> Current address </span></h5>
					</br>
					<div class="col col-md-8">
						<div class="form-group">
							<label for="curr-add-1">Address Street-1</label>
							<input type="text" name="curr-add-1" id="curr-add-1" class="form-control">
						</div>
					</div>
					<div class="col col-md-8">
						<div class="form-group">
							<label for="curr-add-2">Address Street-2</label>
							<input type="text" name="curr-add-2" id="curr-add-2" class="form-control">
						</div>
					</div>
                    <div class="col col-md-8">
						<div class="form-group">
							<label for="curr-country">Country</label>
							<input type="text" name="curr-country" id="curr-country" class="form-control typeahead">
						</div>
					</div>
					<div class="col col-md-8">
						<div class="form-group">
							<label for="curr-state">State/Province</label>
							<input type="text" name="curr-state" id="curr-state" class="form-control typeahead">
						</div>
					</div>
					<div class="col col-md-8">
						<div class="form-group">
							<label for="curr-city">City</label>
							<input type="text" name="curr-city" id="curr-city" class="form-control typeahead">
						</div>
					</div>
					<div class="col col-md-5">
						<div class="form-group">
							<label for="curr-zip-code">Zip/Postal Code</label>
							<input type="text" name="curr-zip-code" id="curr-zip-code" class="form-control">
						</div>
					</div>
				</div>
				<div class="row">
					<hr style="border-width: 6.5px" />
				<h5><span class="label label-primary"> Telephonic Details</span></h5>
			</br>
					<div class="col col-md-5">
						<div class="form-group">
							<label for="curr-home-phone">Home Telephone</label>
							<input type="text" name="curr-home-phone" id="curr-home-phone" class="form-control">
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-5">
						<div class="form-group">
							<label for="curr-mobile">Mobile</label>
							<input type="text" name="curr-mobile" id="curr-mobile" class="form-control">
						</div>
					</div>
				</div>
				<div class="row">
					<hr style="border-width: 6.5px" />
				<h5><span class="label label-primary">Email Addresses </span></h5>
			</br>
					<div class="col-md-5">
						<div class="form-group">
							<label for="pri-email">Private Email</label>
							<input type="text" name="pri-email" id="pri-email" class="form-control">
						</div>
					</div>
				</div>
				</br>
				<div class="row">
					<hr style="border-width: 6.5px" />
				</br>
					<div class="col-md-3 col-md-offset-4">
					<div class="row">
					    <div class="form-group">
						    <button type="button" class="btn btn-danger" id="contact-edit"><strong> Edit Details </strong></button>
					    </div>
					    <div class="form-group">
						    <button type="button" class="btn btn-success" id="contact-edit-save"><strong> Save Details </strong></button>
					    </div>
					    <div class="form-group">
						    <button type="button" class="btn btn-default" id="contact-edit-cancel"><strong> Cancel </strong></button>
					    </div>
					</div>
					</div>
				</div>
			</form>
		</div>

         <!--                                     JOB DETAILS                       -->
<div id="job-detail">
	<h5><center><span class="label label-primary"> Job Details </span></center></h5>
	</br>
	<form id="jobemp-form" role="form" action="" type="post" class="col col-md-12">
		<div class="row">
			<div class="col col-md-5">
				<h5><span class="label label-primary">Department</span></h5>
				</br>
				<div class="form-group">
					<select class="selectpicker" id="depts" name="department">
                        <option value="None">Not Selected Yet</option>
                    </select>
				</div>
			</div>
		</div>
		<hr style="border-width: 6.5px;" />
		<div class="row">
			<div class="col col-md-5">
				<h5><span class="label label-primary">Designation</span></h5>
				</br>
				<div class="form-group">
					<select class="selectpicker" id="desg" name="desigation">
                        <option value="None">Not Selected Yet</option>
                    </select>
				</div>
			</div>
		</div>
		<hr style="border-width: 6.5px;" />
		<div class="row">
			<div class="col col-md-5">
				<h5><span class="label label-primary">Employement Status</span></h5>
				</br>
				<div class="form-group">
					<select class="selectpicker" id="emp-type" name="emp-type">
                        <option value="None">Not Selected Yet</option>
						<option value="Contract Basis">Contract Basis</option>
						<option value="Full time contract">Full time contract</option>
						<option value="Full time Permanant">Full time Permanant</option>
						<option value="Probation">Probation</option>
						<option value="Part time Internship">Part time Internship</option>
					</select>
				</div>
			</div>
		</div>

		<hr style="border-width: 6.5px;" />
		<div class="row">
			<div class="col col-md-3">
				<h5><span class="label label-primary">Joining date</span></h5>
				</br>
				<div class="form-group">
					<div class="inner-addon left-addon date" id="jd1">
                        <i class="glyphicon glyphicon-calendar"></i>
                        <input type="text" class="form-control datepicker" id="join-date" name="join-date" placeholder="Joining date" readonly="readonly" />
					</div>
				</div>
			</div>
		</div>

		<hr style="border-width: 6.5px;" />
		<div class="row">
			<div class="col col-md-5">
				<h5><span class="label label-primary">Location</span></h5>
				</br>
				<div class="form-group">
					<select class="selectpicker" id="job-location" name="job-location">
                        <option value="None">Not Selected Yet</option>
						<option value="Ahmedabad - HQ">Ahmedabad - HQ</option>
						<option value="Bangalore">Bangalore</option>
					</select>
				</div>
			</div>
		</div>

		<hr style="border-width: 6.5px;" />
		</br>
		<div class="row">
            <div class="form-group">
                <button type="button" class="btn btn-danger" id="job-edit"><strong> Edit Details </strong></button>
            </div>
            <div class="form-group">
                <button type="button" class="btn btn-success" id="job-edit-save"><strong> Save Details </strong></button>
            </div>
            <div class="form-group">
                <button type="button" class="btn btn-default" id="job-edit-cancel"><strong> Cancel </strong></button>
            </div>
        </div>

	</form>
</div>
        <!-- -------                    Reporting Details              -----------     -->

<div id="reporting-detail">
	<h5><center><span class="label label-primary"> Reporting Details </span></center></h5>
	</br>
		<div class="row">
			<div class="col-md-10">
				<div class="form-group-reporting">
					<table class="table table-bordered">
						<thead>
							<th>Reporting To</th>
							<th>Type</th>
                            <th>Action</th>
						</thead>
                        {% if reporting %}
                        <tbody>
                            {% for reportee in reporting %}
                            <tr>
                                <td>{{ reportee.supervisor_name }}</td>
                                <td>{{ reportee.reporting_type }}</td>
                                <td><button type="button" class="btn btn-danger" name="delete-row" id="{{ reportee.supervisor_id }}" value="{{ reportee.supervisor_id }}"><span class="glyphicon glyphicon-remove"></span></button></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        {% endif %}
					</table>
				</div>
			</div>
		</div>	
		<div class="row" id="add-delete-super-buttons">
			<div class="col-md-1 col-md-offset-1">
				<div class="form-group">
					<button id="add-supervisor" type="button" class="btn btn-success">Add</button>
				</div>
			</div>

		</div>
		<hr style="border-width: 6.5px;" />
		</br>
		<div class="row" id="supervisor-selects">
			<form id="job-form" role="form" action="" type="post" class="col col-md-12">
				<div class="row">
					<div class="col col-md-5">
						<h5><span class="label label-primary">Select supervisor</span></h5>
						</br>
						<div class="form-group">
							<input type="text" id="supervisor-name" name="supervisor-name" class="form-control" placeholder="Type in supervisor name" data-provide="typeahead">
						</div>
						</br>
						<h5><span class="label label-primary">Type</span></h5>
						</br>
						<div class="form-group">
							<select class="selectpicker" id="reporting-type" name="reporting-type">
                                <option value="None">Not Selected Yet</option>
                                <option value="Direct">Direct</option>
                                <option value="Indeirect">Indirect</option>
                            </select>
						</div>
					</div>
				</div>

				<div class="row" id="save-cancell-super-buttons">
					<div class="col-md-1 col-md-offset-1">
						<div class="form-group">
							<button id="save-supervisor" type="button" class="btn btn-success">Add</button>
						</div>
					</div>

					<div class="col-md-1">
						<div class="form-group">
							<button id="cancel-supervisor" type="button" class="btn btn-danger">Cancel</button>
						</div>
					</div>
				</div>

			</form>
		</div>	

</div>

	</div>
</div>


{% endblock %}